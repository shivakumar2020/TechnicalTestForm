properties([pipelineTriggers([githubPush()])])

node {
        git url: 'https://github.com/shivakumar2020/TechnicalTestForm.git',branch: 'main'
        stage ('Compile Stage') {
            echo "compiling"
             bat 'mvn clean compile'
            echo "compilation completed"          
        }
        stage ('Testing Stage') {
            echo "testing"
             bat 'mvn test'
            echo "testing completed"
        }
 		post {
	        always {
	           archiveArtifacts 'reports/*.html', allowEmptyArchive: true
	        }
    }
     publishHTML (target : [allowMissing: false,
 				alwaysLinkToLastBuild: true,
 				keepAll: true,
				 reportDir: 'reports',
 				reportFiles: 'AutomationReport.html',
			    reportName: 'TestAutoamtion',
 				reportTitles: 'TTest Automation Report'])           
}